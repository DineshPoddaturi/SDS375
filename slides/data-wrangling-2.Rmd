---
title: "Data wrangling 2"
author: "Claus O. Wilke"
date: "last updated: `r Sys.Date()`"
output:
  xaringan::moon_reader:
    css: [default, "Wilke-slides-theme.css"]
    lib_dir: libs
    nature:
      ratio: '16:9'
      highlightStyle: github
      highlightLines: true
      slideNumberFormat: ''
      titleSlideClass: [center, middle]
---

```{r setup, include=FALSE, echo=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(comment = "")

library(tidyverse)
library(palmerpenguins)
```


## Elementary data manipulations

Previous class:

- Pick rows: `filter()`
- Pick columns: `select()`
- Sort rows: `arrange()`

<br>


--

This class:

- Count things: `count()`
- Create analysis pipelines: `%>%`
- Make new columns: `mutate()`

---

## Count things

.tiny-font[
```{r}
penguins
```
]

---

## Count things

.tiny-font[
```{r eval = FALSE}
penguins %>%
  count(species)
```

```{r echo = FALSE}
# for some reason this data frame has row names, which are indicated with
# an asterisk, which shows up as a highlighted row
x <- penguins %>%
  count(species)

row.names(x) <- NULL
x
```
]

---

## Count things

.tiny-font[
```{r}
penguins %>%
  count(species, island)
```
]

---

## Use the pipe to build analysis pipelines

.tiny-font[
```{r}
penguins %>%
  filter(species == "Adelie")
```
]

---

## Use the pipe to build analysis pipelines

.tiny-font[
```{r}
penguins %>%
  filter(species == "Adelie") %>%
  select(island, sex)
```
]


---

## Use the pipe to build analysis pipelines

.tiny-font[
```{r}
penguins %>%
  filter(species == "Adelie") %>%
  select(island, sex) %>%
  count(island, sex)
```
]

---
## Make a new table column: `mutate()`

<br>

.center[
<img src = "data-wrangling-2_files/mutate.svg", width = 75%></img>
]

---

## Example: flipper length in cm

.tiny-font[
```{r}
penguins %>%
  select(species, island, flipper_length_mm)
```
]

---

## Example: flipper length in cm

.tiny-font[
```{r}
penguins %>%
  select(species, island, flipper_length_mm) %>%
  mutate(flipper_length_cm = flipper_length_mm / 10)
```
]

---

## Make multiple columns at once

.tiny-font[
```{r}
penguins %>%
  select(species, island, flipper_length_mm) %>%
  mutate(
    flipper_length_cm = flipper_length_mm / 10,  # <- notice the comma
    flipper_length_in = flipper_length_mm / 25.4
  )
```
]

