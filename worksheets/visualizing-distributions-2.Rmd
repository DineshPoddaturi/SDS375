---
#############################################################
#                                                           #
# Click on "Run Document" in RStudio to run this worksheet. #
#                                                           #
#############################################################
title: "Visualizing distributions 2"
author: "Claus O. Wilke"
output: learnr::tutorial
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
library(learnr)
library(tidyverse)
knitr::opts_chunk$set(echo = FALSE, comment = "")

# data prep
lincoln_temps <- readRDS(url("https://wilkelab.org/SDS375/datasets/lincoln_temps.rds"))
```

## Introduction

In this worksheet, we will discuss how to display many distributions at once, using boxplots, violin plots, strip charts, sina plots, and ridgeline plots.

We will be using the R package **tidyverse**, which includes `ggplot()` and related functions. We will also use the packages **ggforce** and **ggridges** to make sina and ridgeline plots, respectively.

```{r library-calls, echo = TRUE, eval = FALSE}
# load required library
library(tidyverse)
library(ggforce)
library(ggridges)
```

The dataset we will be working with contains information about the mean temperature for every day of the year 2016 in Lincoln, NE:
```{r titanic, echo = TRUE}
lincoln_temps
```

## Boxplots and violins

We start by drawing the distributions of mean temperatures for each month of the year (columns `month` and `mean_temp` in the dataset `lincoln_temps`), using boxplots. We can do this in ggplot with the geom `geom_boxplot()`. Try this for yourself.

```{r lincoln-box, exercise=TRUE}
ggplot(lincoln_temps, aes(___)) +
  ___
```

```{r lincoln-box-hint}
ggplot(lincoln_temps, aes(x = ___, y = ___)) +
  geom_boxplot()
```

```{r lincoln-box-solution}
ggplot(lincoln_temps, aes(x = month, y = mean_temp)) +
  geom_boxplot()
```

Next, do the same but now using violins (`geom_violin()`) instead of boxplots.

```{r lincoln-violin, exercise = TRUE}

```

```{r lincoln-violin-solution}
ggplot(lincoln_temps, aes(x = month, y = mean_temp)) +
  geom_violin()
```

Customize the violins by trying some of the following:

- Change the fill or outline color.
- Swap the x and y mappings.
- Change the bandwidth (parameter `bw`) or kernel (parameter `kernel`). These parameters work just like in `geom_density()` as discussed in the previous worksheet.
- Set `trim = FALSE`. What does this do?


## Strip charts and sina plots

Both boxplots and violin plots have the disadvantage that they don't show the individual data points. 

*Some more text here.*

**Hint:** Use `size = 0.75` to reduce the size of the individual points.

```{r lincoln-strip, exercise = TRUE}
ggplot(lincoln_temps, aes(x = month, y = mean_temp)) +
  ___
```

```{r lincoln-strip-solution}
ggplot(lincoln_temps, aes(x = month, y = mean_temp)) +
  geom_point(size = 0.75)
```

*Now with jittering.*

```{r lincoln-strip-jitter, exercise = TRUE}
ggplot(lincoln_temps, aes(x = month, y = mean_temp)) +
  geom_point(
    size = 0.75,
    ___
  )
```

```{r lincoln-strip-jitter-hint}
ggplot(lincoln_temps, aes(x = month, y = mean_temp)) +
  geom_point(
    size = 0.75,
    position = position_jitter(___)
  )
```

```{r lincoln-strip-jitter-solution}
ggplot(lincoln_temps, aes(x = month, y = mean_temp)) +
  geom_point(
    size = 0.75,
    position = position_jitter(width = 0.15, height = 0)
  )
```

*Change random seed.*

```{r lincoln-strip-jitter-seed, exercise = TRUE}
ggplot(lincoln_temps, aes(x = month, y = mean_temp)) +
  geom_point(
    size = 0.75,
    position = position_jitter(
      width = 0.15,
      height = 0,
      seed = ___
    )
  )
```

```{r lincoln-strip-jitter-seed-hint}
ggplot(lincoln_temps, aes(x = month, y = mean_temp)) +
  geom_point(
    size = 0.75,
    position = position_jitter(___)
  )
```

```{r lincoln-strip-jitter-seed-solution}
ggplot(lincoln_temps, aes(x = month, y = mean_temp)) +
  geom_point(
    size = 0.75,
    position = position_jitter(width = 0.15, height = 0)
  )
```


Try to change `height` to a value other than 0, or remove it alltogether.

```{r position-jitter-height-q, echo=FALSE}
question("What happens if you set `height` to a value other than 0, or if you don't set it at all? (Select all that apply.)",
  answer("In either case points are getting jittered both horizontally and vertically.", correct = TRUE),
  answer("If `height` is not set at all then points are only jittered horizontally."),
  answer("Nothing happens."),
  answer("Because there are many points close to each other vertically, the amount of vertical jittering is very small.", correct = TRUE),
  answer("Changing `height` is the same as changing `seed`.")
)
```